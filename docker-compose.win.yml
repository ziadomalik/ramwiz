services:
  ramulator-viz:
    build: .
    container_name: ramulator_viz_dev
    environment:
      - DISPLAY=host.docker.internal:0.0
      - LIBGL_ALWAYS_INDIRECT=1 
    volumes:
      - .:/home/dev/visualizer
      - cargo_cache:/home/dev/.cargo/registry
      - pnpm_store:/home/dev/.local/share/pnpm
      - target_cache:/home/dev/visualizer/src-tauri/target
    command: tail -f /dev/null

volumes:
  cargo_cache:
  pnpm_store:
  target_cache: